---
title: "Data Wrangling"
citeproc: true
bibliography: ../../static/bib/references.bib
csl: ../../static/bib/chicago-fullnote-bibliography-no-bib.csl
menu: 
  class:
    parent: Class
    weight: 3
type: docs
output:
  blogdown::html_page:
    toc: true
editor_options: 
  chunk_output_type: console
---




## Filtering

Often, we have a big dataset that covers lots of stuff (say, all flights coming out of NYC in 2013) but we're only interested in a *subset* of those things (say, flights that arrived late over that time period). The `filter()` function is a way to subset operations that match some rule or set of rules (e.g., rule = "flights that arrived late"). We define these rules using [logical operators](https://www.statmethods.net/management/operators.html). 


### Examples


Let's load the libraries. 

```{r, message=F,warning=F}
# libraries
library(tidyverse)
library(nycflights13)
```


Remember you can look at the data like this. 

```{r, eval=F}
# look at the data
View(flights) # open data in viewer
?flights # read data documentation
```


Let's look at flights from February.

```{r}
# look at fights, but only from February
flights %>% 
  filter(month == 2)
```


Let's look at flights on Valentine's Day. 

```{r}
# now let's look at flights on Valentine's Day
flights %>% 
  filter(month == 2) %>% 
  filter(day == 14)
```


Let's try the OR logical operator by looking at flights going to ATL or SFO.

```{r}
# try one using text and the OR symbol
# look at fights going to ATL or SFO
flights %>% 
  filter(dest == "ATL" | dest == "SFO")

```


Let's look at flights between noon and 5pm.

```{r}
# try one using greater than or less than
# look at flights departing between 12pm and 5pm
flights %>% 
  filter(dep_time >= 1200) %>% 
  filter(dep_time <= 1700)

```

Let's look at how many flights arrived late on christmas day.

```{r}
## how many flights arrived LATE, on christmas day?
late_xmas = flights %>% 
  filter(arr_time > sched_arr_time) %>% 
  filter(month == 12, day == 25)

```


Let's look up the flight that Alex told us about.

```{r}
## alex search terms: 
## flight was in august
## at least 15 minutes late in departing
## headed to BOSTON
flights %>% 
  filter(dest == "BOS") %>% 
  filter(month == 8) %>% 
  filter(dep_delay >= 15)
```



